简而言之，所谓并发编程是指在一台处理器上“同时”处理多个任务



### 并发和并行

***并行(parallel)***指在同一时刻，有多条指令在多个处理器上同时执行。

***并发(concurrency)***：指在同一时刻只能有一条指令执行，但多个进程指令被快速的轮换执行，使得在宏观上具有多个进程同时执行的效果，但在微观上并不是同时执行的，只是把时间分成若干段，通过cpu***时间片轮转***使多个进程快速交替的执行。

### 线程

#### 线程并发

LWP：light weight process 轻量级的进程，本质仍是进程 (Linux下)

​	进程：独立地址空间，拥有PCB 

​	线程：有独立的PCB，但没有独立的地址空间(共享)

​	区别：在于是否共享地址空间。独居(进程)；合租(线程)。

​	线程：最小的执行单位

​	进程：最小分配资源单位，可看成是只有一个线程的进程。

​	Windows系统下，可以直接忽略进程的概念，只谈线程。因为线程是最小的执行单位，是被系统独立调度和分派的基本单位。而进程只是给线程提供执行环境。

#### 线程同步 

​	同步即协同步调，按预定的先后次序运行。

​	***线程同步，指一个线程发出某一功能调用时，在没有得到结果之前，该调用不返回。同时其它线程为保证数据一致性，不能调用该功能。***

举例1：	银行存款 5000。柜台，折：取3000；提款机，卡：取 3000。剩余：2000

举例2： 内存中100字节，线程T1欲填入全1， 线程T2欲填入全0。但如果T1执行了50个字节失去cpu，T2执行，会将T1写过的内容覆盖。当T1再次获得cpu继续	从失去cpu的位置向后写入1，当执行结束，内存中的100字节，既不是全1，也不是全0。

​	产生的现象叫做“与时间有关的错误”(time related)。为了避免这种数据混乱，线程需要同步。

​	“同步”的目的，是为了避免数据混乱，解决与时间有关的错误。实际上，不仅线程间需要同步，进程间、信号间等等都需要同步机制。

​	因此，***所有“多个控制流，共同操作一个共享资源”的情况，都需要同步。***

### 锁的应用

#### 互斥量

#### 读写锁

***

## 原理探究

在操作系统提供的内核线程之上，Go搭建了一个特有的***两极线程模型***。

goroutine是go语言独创，它代表可以并发执行的***go代码片段***

goroutine子所以叫这个名字，是因为他们认为已经存在的线程，协程，进程等属于都传递了一个错误的含义。为了和他们区分开才发明了这个词

。。。

go的并发机制，指的是支撑goroutine和channel的底层原理。

#### 线程实现模型

线程实现模型的三个必须知道的核心元素

M:machine的缩写。一个M代表一个***内核线程***，或者称***工作线程***

P:processor的缩写。一个P代表执行一个Go代码片段所必须的资源（或称上下文环境）

G:goroutine的缩写。一个G代表一个go代码片段。前者是对后者的一种封装

